generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id             String         @id @default(cuid())
  userId         String         @unique                 // Clerk user ID
  name           String
  email          String?
  phone          String?
  
  class10        Class10Marks?
  class12        Class12Marks?

  branchChoice1  String                              // First preference (e.g., CSE)
  branchChoice2  String                              // Second preference (e.g., ECE)

  seatAllotted   String?                             // Final stream allotted by admin
  seatAccepted   Boolean        @default(false)      // Did student accept it?
  
  receiptUrl     String?                             // Link to uploaded receipt
  receiptStatus  ReceiptStatus  @default(PENDING)    // PENDING, VERIFIED, REJECTED

  offerLetterUrl String?                             // Link to generated offer letter

  createdAt      DateTime       @default(now())
}

model Class10Marks {
  id        String   @id @default(cuid())
  student   Student  @relation(fields: [studentId], references: [id])
  studentId String   @unique

  math      Int
  science   Int
  english   Int
  hindi     Int
  social    Int
}

model Class12Marks {
  id        String   @id @default(cuid())
  student   Student  @relation(fields: [studentId], references: [id])
  studentId String   @unique

  physics   Int
  chemistry Int
  math      Int
}

enum ReceiptStatus {
  PENDING
  VERIFIED
  REJECTED
}
